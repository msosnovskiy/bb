window.rbgShiftSlider=function(e){(e=e||{}).slideImages=e.hasOwnProperty("slideImages")?e.slideImages:[],e.stageWidth=e.hasOwnProperty("stageWidth")?e.stageWidth:600,e.stageHeight=e.hasOwnProperty("stageHeight")?e.stageHeight:600,e.displacementImage=e.hasOwnProperty("displacementImage")?e.displacementImage:"",e.fullScreen=!e.hasOwnProperty("fullScreen")||e.fullScreen,e.transitionDuration=e.hasOwnProperty("transitionDuration")?e.transitionDuration:.25,e.transitionGhostDuration=e.hasOwnProperty("transitionGhostDuration")?e.transitionGhostDuration:.25,e.transitionFilterIntensity=e.hasOwnProperty("transitionFilterIntensity")?e.transitionFilterIntensity:350,e.transitioSpriteIntensity=e.hasOwnProperty("transitioSpriteIntensity")?e.transitioSpriteIntensity:2,e.mouseDispIntensity=e.hasOwnProperty("mouseDispIntensity")?e.mouseDispIntensity:3,e.nav=!e.hasOwnProperty("nav")||e.nav,e.navElement=e.hasOwnProperty("navElement")?e.navElement:".scene-nav",e.interactive=!e.hasOwnProperty("interactive")||e.interactive,e.autoPlay=!e.hasOwnProperty("autoPlay")||e.autoPlay,e.autoPlaySpeed=e.hasOwnProperty("autoPlaySpeed")?e.autoPlaySpeed:3e3;var t=document.getElementById("rbgShiftSlider");PIXI.utils.skipHello();var n,i,a,r,s,o,l,h=new PIXI.Container,I=PIXI.autoDetectRenderer(e.stageWidth,e.stageHeight,{transparent:!0}),w=new PIXI.Container,u=[],p=[],y=[],c=[],d=[],P=[];const m={x:0,y:0};var g,v,f,x=0,D=0,S=0,O=0,X=0;function C(t){TweenMax.set(m,{x:0,ease:Power0.easeOut}),(f=new TimelineMax({onStart:function(){TweenMax.to(m,e.transitionGhostDuration,{x:screen.width,ease:Power0.easeOut})},onComplete:function(){X=t,!0===e.interactive&&function(){if(cancelAnimationFrame(v),!f.isActive()){for(var t=0,n=y.length;t<n;t++)P[t].x=0,P[t].y=0,d[t].scale.x=0,d[t].scale.y=0;!function t(){if(g=requestAnimationFrame(t),m.x>=screen.width){S+=(x-S)/e.mouseDispIntensity,O+=(D-O)/e.mouseDispIntensity;for(var n=0,i=y.length;n<i;n++)d[n].scale.x=S-P[n].x,d[n].scale.y=O-P[n].y,P[n].position.x=S,P[n].position.y=O}else cancelAnimationFrame(g)}()}}()},onUpdate:function(){S+=(m.x-S)/3,O+=(m.x-O)/3;for(var t=0,n=y.length;t<n;t++)d[t].scale.x=Math.atan(S-P[t].x)*(f.progress()*e.transitionFilterIntensity),P[t].position.x=O*(f.progress()*e.transitionSpriteIntensity)}})).to([u[0],u[1],u[2]],e.transitionDuration,{alpha:0,ease:Power2.easeOut},e.transitionDuration).add(function(){for(var n=0;n<e.slideImages.length;++n)if(n==t)for(var i=0,a=y.length;i<a;i++)u[i].texture=p[n],f.to(u[i],e.transitionDuration,{alpha:1,ease:Power2.easeOut},e.transitionDuration)},e.transitionDuration)}t.appendChild(I.view),h.addChild(w),!0===e.fullScreen?(I.view.style.objectFit="cover",I.view.style.width="100%",I.view.style.height="100%",I.view.style.top="50%",I.view.style.left="50%",I.view.style.webkitTransform="translate( -50%, -50% ) scale(1.2)",I.view.style.transform="translate( -50%, -50% ) scale(1.2)"):(I.view.style.maxWidth="100%",I.view.style.top="0",I.view.style.left="0"),(n=new PIXI.ticker.Ticker).autoStart=!0,n.add(function(e){I.render(h)}),w.interactive=!0,function(){(i=new PIXI.filters.ColorMatrixFilter).matrix=[1,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,1,0],(a=new PIXI.filters.ColorMatrixFilter).matrix=[0,0,0,0,0,0,1,0,0,0,0,0,0,0,0,0,0,0,1,0],(r=new PIXI.filters.ColorMatrixFilter).matrix=[0,0,0,0,0,0,0,0,0,0,0,0,1,0,0,0,0,0,1,0],c.push(i,a,r),(s=new PIXI.Container).position.x=0,(o=new PIXI.Container).position.x=0,(l=new PIXI.Container).position.x=0,y.push(s,o,l);for(var t=0;t<e.slideImages.length;++t)p[t]=new PIXI.Texture.fromImage(e.slideImages[t]);t=0;for(var n=y.length;t<n;t++){w.addChild(y[t]),texture=new PIXI.Texture.fromImage(e.displacementImage),P.push(new PIXI.Sprite(texture)),d.push(new PIXI.filters.DisplacementFilter(P[t]));var h=new PIXI.Sprite(p[0]);u.push(h),u[t].width=I.view.width,u[t].height=I.view.height,u[t].anchor.set(.5),u[t].x=I.view.width/2,u[t].y=I.view.height/2,u[t].alpha=0,y[t].addChild(P[t],u[t]),y[t].filters=[d[t],c[t]],d[t].scale.x=0,d[t].scale.y=0,d[t].autoFit=!0}P[0].anchor.set(0),P[1].anchor.set(.5),P[2].anchor.set(.3),y[1].filters[1].blendMode=PIXI.BLEND_MODES.ADD,y[2].filters[1].blendMode=PIXI.BLEND_MODES.ADD}(),!0===e.autoPlay?(Date.now(),C(X=0),setInterval(function(){(X+=1)===e.slideImages.length?C(X=0):C(X)},e.autoPlaySpeed)):C(0)};